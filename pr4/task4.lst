GAS LISTING task4.S 			page 1


   1              	/* –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–∏—Ñ—Ä –∏ –≤—ã–≤–æ–¥
   2              		
   3              	.include "my-macro" 		# –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ñ–∞–π–ª —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
   1              	/*
   2              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
   3              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
   4              	 *     - –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
   5              	 *
   6              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
   7              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              	    movl $1, %eax         # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ exit
  11              	    movl \ret_val, %ebx     # –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
  12              	    int $0x80         # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞ –∫–æ–¥–∞ —Å
  18              	 * —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  19              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  20              	 *     - –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –±–∞–π—Ç–∞
  21              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  22              	 *    - –≤ %eax –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤
  23              	 *    - –ø–æ –∞–¥—Ä–µ—Å—É buf_addr - —Å—á–∏—Ç–∞–Ω–Ω—ã–π –±–∞–π—Ç
  24              	 *
  25              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  26              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 read'
  27              	*/
  28              	.macro Getchar buf_addr
  29              	    movl $3, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ read
  30              	    movl $0, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ
  31              	    movl \buf_addr, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ (–æ–Ω –∂–µ - —Ñ–∞–∫—Ç–∏—á
  32              	                     # –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞)
  33              	    movl $1, %edx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—
  34              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  35              	.endm
  36              	
  37              	/*
  38              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è  –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–
  39              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  40              	 *     - –°—Ç—Ä–æ–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
  41              	 *
  42              	 * –ü—Ä–∏–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞:
  43              	 *    Puts "–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏"
  44              	 *
  45              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  46              	 *    - –≤—ã–≤–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª—ã –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–
  47              	 *      –∏ –≤—Å–ª–µ–¥ –∑–∞ –Ω–∏–º–∏ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ \n
  48              	 *
  49              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  50              	 * –°–º. —Ç–∞–∫–∂–µ 'man puts', 'man 2 write'
  51              	*/
  52              	.macro Puts string
  53              	.data
  54              	    str\@:     .ascii "\string\n"  # —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –
GAS LISTING task4.S 			page 2


  55              	
  56              	    strlen\@ =     . - str\@           # –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–
  57              	
  58              	.text
  59              	    movl $4, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
  60              	    movl $1, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤
  61              	    movl $str\@, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏
  62              	    movl $strlen\@, %edx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–
  63              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  64              	.endm
   4              	
   5              	.data
   6 0000 30       		delta: .byte 0x30		# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ –
   7 0001 0000     		summ: .short 0
   8              	.bss
   9              	        .lcomm c, 1               # –ë—É—Ñ–µ—Ä –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞.
  10              	        .lcomm out10, 6           # –ë—É—Ñ–µ—Ä –¥–ª—è –≤—ã–≤–æ–¥–∞.
  11              	        .lcomm n, 1		  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–º–≤–æ
  12              	
  13              	.text
  14              	.global _start
  15              	
  16              	_start:
  17              	
  18              	input:
  19              	        Puts "–í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É"
  19              	> .data
  19 0003 D092D0B2 	>  str0:.ascii "–í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É\n"
  19      D0B5D0B4 
  19      D0B8D182 
  19      D0B520D1 
  19      86D0B8D1 
  19              	> 
  19              	>  strlen0 =. - str0
  19              	> 
  19              	> .text
  19 0000 B8040000 	>  movl $4,%eax
  19      00
  19 0005 BB010000 	>  movl $1,%ebx
  19      00
  19 000a B9030000 	>  movl $str0,%ecx
  19      00
  19 000f BA1A0000 	>  movl $strlen0,%edx
  19      00
  19 0014 CD80     	>  int $0x80
  20              	
  21              	show_prompt:
  22              	        Getchar $c              # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞—
  22 0016 B8030000 	>  movl $3,%eax
  22      00
  22 001b BB000000 	>  movl $0,%ebx
  22      00
  22 0020 B9000000 	>  movl $c,%ecx
  22      00
  22              	>  
  22 0025 BA010000 	>  movl $1,%edx
  22      00
GAS LISTING task4.S 			page 3


  22 002a CD80     	>  int $0x80
  23 002c 83F800   	        Cmpl $0, %eax           # –ö–æ–Ω–µ—Ü —Ñ–∞–π–ª - EOF (–≤–≤–µ–¥–µ–Ω–æ 0 —Å–∏–º–≤–æ–ª–æ–≤) ?
  24 002f 0F84B000 	        je print_summ_numbers         # –î–∞ - –≤—ã–≤–æ–¥ —Å—É–º–º—ã
  24      0000
  25              	
  26 0035 803D0000 		cmpb $'\n', c           # —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ ?
  26      00000A
  27 003c 0F84A300 	        je print_summ_numbers   # –¥–∞ - –≤—ã–≤–æ–¥ —Å—É–º–º—ã
  27      0000
  28              	
  29 0042 803D0000 		cmpb $'-', c
  29      00002D
  30 0049 7435     		je minus_numb
  31              	
  32 004b 803D0000 		cmpb $'9', c            # –∫–æ–¥ –±–æ–ª—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '9' ?
  32      000039
  33 0052 775E     	        ja print_err            # –î–ê - –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
  34 0054 803D0000 	        cmpb $'0', c            # –∫–æ–¥ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '0' ?
  34      000030
  35 005b 7255     	        jb print_err            # –î–ê - –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
  36              	
  37 005d A0000000 	        movb c, %al
  37      00
  38 0062 A20A0000 	        movb %al, n
  38      00
  39              	
  40              	plus_numb:
  41 0067 6631C0   		xorw %ax, %ax		# –û–±–Ω—É–ª–µ–Ω–∏–µ %ax –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  42              	
  43 006a A00A0000 	        movb n, %al             # –ü—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º %al –∑–Ω–∞—á–µ–Ω–∏–µ n
  43      00
  44              	
  45 006f 2A050000 		subb delta, %al		# –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–æ –∏–∑ –∫–æ–¥–∞
  45      0000
  46 0075 66010501 		addw %ax, summ		# –ü—Ä–∏–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ –∫ —Å—É–º–º–µ
  46      000000
  47 007c 724F     		jc err_buf_over		# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
  48              	
  49 007e EB96     		jmp show_prompt
  50              	
  51              	minus_numb:
  52              		Getchar $c
  52 0080 B8030000 	>  movl $3,%eax
  52      00
  52 0085 BB000000 	>  movl $0,%ebx
  52      00
  52 008a B9000000 	>  movl $c,%ecx
  52      00
  52              	>  
  52 008f BA010000 	>  movl $1,%edx
  52      00
  52 0094 CD80     	>  int $0x80
  53 0096 6631C0   		xorw %ax, %ax           # –û–±–Ω—É–ª–µ–Ω–∏–µ %ax –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  54              	
  55 0099 A0000000 	        movb c, %al             # –ü—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º %al –∑–Ω–∞—á–µ–Ω–∏–µ c
  55      00
  56              	
GAS LISTING task4.S 			page 4


  57 009e 2A050000 	        subb delta, %al         # –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–æ –∏–∑ –∫–æ–¥–∞
  57      0000
  58              	
  59 00a4 66290501 	        subw %ax, summ          # –ü—Ä–∏–±–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ –∫ —Å—É–º–º–µ
  59      000000
  60 00ab 7220     		jc err_buf_over         # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
  61              	
  62 00ad E964FFFF 	        jmp show_prompt
  62      FF
  63              		
  64              	print_err:
  65              		Puts "–ù–µ —Ü–∏—Ñ—Ä–æ–≤–∞—è –∫–ª–∞–≤–∏—à–∞. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–≤–æ–¥"	# –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ
  65              	> .data
  65 001d D09DD0B5 	>  str3:.ascii "–ù–µ —Ü–∏—Ñ—Ä–æ–≤–∞—è –∫–ª–∞–≤–∏—à–∞. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–≤–æ–¥\n"
  65      20D186D0 
  65      B8D184D1 
  65      80D0BED0 
  65      B2D0B0D1 
  65              	> 
  65              	>  strlen3 =. - str3
  65              	> 
  65              	> .text
  65 00b2 B8040000 	>  movl $4,%eax
  65      00
  65 00b7 BB010000 	>  movl $1,%ebx
  65      00
  65 00bc B91D0000 	>  movl $str3,%ecx
  65      00
  65 00c1 BA420000 	>  movl $strlen3,%edx
  65      00
  65 00c6 CD80     	>  int $0x80
  66 00c8 E949FFFF 		jmp show_prompt 				# –Ω–∞ –≤–≤–æ–¥ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
  66      FF
  67              	
  68              	err_buf_over:	
  69              		Puts "–ü—Ä–æ–∏–∑–æ—à–ª–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ. –í—ã—Ö–æ–¥."	# –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ
  69              	> .data
  69 005f D09FD180 	>  str4:.ascii "–ü—Ä–æ–∏–∑–æ—à–ª–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ. –í—ã—Ö–æ–¥.\n"
  69      D0BED0B8 
  69      D0B7D0BE 
  69      D188D0BB 
  69      D0BE20D0 
  69              	> 
  69              	>  strlen4 =. - str4
  69              	> 
  69              	> .text
  69 00cd B8040000 	>  movl $4,%eax
  69      00
  69 00d2 BB010000 	>  movl $1,%ebx
  69      00
  69 00d7 B95F0000 	>  movl $str4,%ecx
  69      00
  69 00dc BA390000 	>  movl $strlen4,%edx
  69      00
  69 00e1 CD80     	>  int $0x80
  70 00e3 EB18     		jmp stop				# –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  71              	
GAS LISTING task4.S 			page 5


  72              	print_summ_numbers:
  73              		Puts "–°—É–º–º–∞ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª: "
  73              	> .data
  73 0098 D0A1D183 	>  str5:.ascii "–°—É–º–º–∞ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª: \n"
  73      D0BCD0BC 
  73      D0B020D0 
  73      B2D0B2D0 
  73      B5D0B4D0 
  73              	> 
  73              	>  strlen5 =. - str5
  73              	> 
  73              	> .text
  73 00e5 B8040000 	>  movl $4,%eax
  73      00
  73 00ea BB010000 	>  movl $1,%ebx
  73      00
  73 00ef B9980000 	>  movl $str5,%ecx
  73      00
  73 00f4 BA2B0000 	>  movl $strlen5,%edx
  73      00
  73 00f9 CD80     	>  int $0x80
  74 00fb EB0C     		jmp ToString
  75              	
  76              	stop:
  77              		Exit $0			# –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  77 00fd B8010000 	>  movl $1,%eax
  77      00
  77 0102 BB000000 	>  movl $0,%ebx
  77      00
  77 0107 CD80     	>  int $0x80
  78              	
  79              	ToString:
  80 0109 66BB0A00 	        movw $10, %bx           # –°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Å–ª–µ–Ω–∏—è. –ù–∞ –Ω–µ—ë –±—É–¥–µ–º –¥–µ–ª–
  81 010d BE040000 	        movl $4, %esi           # –ê–¥—Ä–µ—Å —Å–∞–º–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ —á–∏–ª–∞. –í —á–∏—Å–ª–µ –Ω
  81      00
  82 0112 66A10100 	        movw summ, %ax 		# –ö–æ–ø–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –≤ %ax
  82      0000
  83 0118 31FF     	        xorl %edi, %edi         # –û–±–Ω—É–ª—è–µ–º %edi
  84              	
  85              	ToStr_begin:                  # –ù–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞
  86 011a BA000000 	        movl $0, %edx           # –û–±–Ω—É–ª—è–µ–º %edx (–í –Ω—ë–º –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É
  86      00
  87 011f 66F7F3   	        divw %bx                # –î–µ–ª–∏–º %ax –Ω–∞ %bx, –æ—Å—Ç–∞—Ç–æ–∫ –≤ %dx
  88 0122 80C230   	        addb $0x30, %dl         # –ü—Ä–∏–±–∞–≤–ª—è–µ–º –∫ %dl 0x30, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫
  89 0125 88960400 	        movb %dl, out10(%esi) 	# –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ %dl –≤ –±—É—Ñ–µ—Ä –ø–æ –Ω—É–
  89      0000
  90              	
  91 012b 6683F800 	        cmpw $0, %ax            # –î–æ—à–ª–∏ –¥–æ –Ω—É–ª—è? (–í %ax –ø—É—Å—Ç–æ?)
  92 012f 7403     	        je ToStr_out     	# –î–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
  93              	
  94 0131 4E       	        decl %esi               # –ù–µ—Ç, —É–º–µ–Ω—å—à–∞–µ–º %esi –Ω–∞ 1
  95 0132 EBE6     	        jmp ToStr_begin     	# –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞
  96              	
  97              	ToStr_out:
  98 0134 83FE05   	        cmpl  $5, %esi          # –í %esi 5?
  99 0137 7417     	        je stop_to_string     # –î–∞, –≤—ã—Ö–æ–¥–∏–º
 100              	
GAS LISTING task4.S 			page 6


 101 0139 8A860400 	        movb out10(%esi), %al 	# –ö–æ–ø–∏—Ä—É–µ–º –±–∞–π—Ç –ø–æ –∞–¥—Ä–µ—Å—É  out(%esi) –≤ %al
 101      0000
 102 013f C6860400 	        movb $0, out10(%esi)  	# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º 0 –ø–æ –∞–¥—Ä–µ—Å—É out(%esi)
 102      000000
 103 0146 88870400 	        movb %al, out10(%edi) 	# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ %al –ø–æ –∞–¥—Ä–µ—Å—É out(%e
 103      0000
 104 014c 46       	        inc %esi                # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º %esi –Ω–∞ 1
 105 014d 47       	        inc %edi                # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º %edi –Ω–∞ 1
 106 014e EBE4     	        jmp ToStr_out    	# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞
 107              	
 108              	stop_to_string:
 109 0150 B8040000 		movl $4, %eax		# –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
 109      00
 110 0155 BB010000 		movl $1, %ebx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞	
 110      00
 111 015a B9040000 		movl $out10, %ecx	# –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏–º–≤–æ
 111      00
 112 015f 89F2     		movl %esi, %edx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞
 113 0161 CD80     		int $0x80		# –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
 114              		Puts ""
 114              	> .data
 114 00c3 0A       	>  str7:.ascii "\n"
 114              	> 
 114              	>  strlen7 =. - str7
 114              	> 
 114              	> .text
 114 0163 B8040000 	>  movl $4,%eax
 114      00
 114 0168 BB010000 	>  movl $1,%ebx
 114      00
 114 016d B9C30000 	>  movl $str7,%ecx
 114      00
 114 0172 BA010000 	>  movl $strlen7,%edx
 114      00
 114 0177 CD80     	>  int $0x80
 115 0179 66C70504 		movw $'',out10
 115      00000027 
 115      00
 116 0182 E98FFEFF 		jmp show_prompt
 116      FF
 117              	
 118              	.end
GAS LISTING task4.S 			page 7


DEFINED SYMBOLS
             task4.S:6      .data:0000000000000000 delta
             task4.S:7      .data:0000000000000001 summ
                             .bss:0000000000000000 c
             task4.S:10     .bss:0000000000000004 out10
             task4.S:10     .bss:000000000000000a n
             task4.S:16     .text:0000000000000000 _start
             task4.S:18     .text:0000000000000000 input
             task4.S:19     .data:0000000000000003 str0
             task4.S:19     *ABS*:000000000000001a strlen0
             task4.S:21     .text:0000000000000016 show_prompt
             task4.S:72     .text:00000000000000e5 print_summ_numbers
             task4.S:51     .text:0000000000000080 minus_numb
             task4.S:64     .text:00000000000000b2 print_err
             task4.S:40     .text:0000000000000067 plus_numb
             task4.S:68     .text:00000000000000cd err_buf_over
             task4.S:65     .data:000000000000001d str3
             task4.S:65     *ABS*:0000000000000042 strlen3
             task4.S:69     .data:000000000000005f str4
             task4.S:69     *ABS*:0000000000000039 strlen4
             task4.S:76     .text:00000000000000fd stop
             task4.S:73     .data:0000000000000098 str5
             task4.S:73     *ABS*:000000000000002b strlen5
             task4.S:79     .text:0000000000000109 ToString
             task4.S:85     .text:000000000000011a ToStr_begin
             task4.S:97     .text:0000000000000134 ToStr_out
             task4.S:108    .text:0000000000000150 stop_to_string
             task4.S:114    .data:00000000000000c3 str7
             task4.S:114    *ABS*:0000000000000001 strlen7

NO UNDEFINED SYMBOLS
