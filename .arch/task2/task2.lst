GAS LISTING task2.S 			page 1


   1              	/*
   2              	 * –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞  –¥–ª—è 
   3              	 * —Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ 
   4              	 * 32-–±–∏—Ç–æ–≤–æ–≥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞
   5              	*/
   6              	
   7              	.include "my-macro"		# –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
   1              	/* –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã */
   2              	
   3              	.macro Finish
   4              	    movl $0, %ebx 	# first argument: exit code
   5              	    movl $1, %eax 	# sys_exit index
   6              	    int  $0x80 		# kernel interrupt
   7              	.endm
   8              	
   8              	
   9              	.text				# —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ 
  10              	        
  11              	.global _start			# —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
  12              	_start:	
  13 0000 B8050000 	        movl $5, %eax		# —á–∏—Å–ª–æ, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Ö–æ–¥–∏–º —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª
  13      00
  14 0005 BB010000 		movl $1, %ebx		# —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª
  14      00
  15              	
  16              	L1: 	
  17 000a 83F800   	        cmpl  $0, %eax		# —É—Å–ª–æ–≤–∏–µ, –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–
  18 000d 7406     		je    L2		# –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤–µ—Ä–Ω–æ, —Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –º–æ–¥—É–ª—é L2
  19 000f 0FAFD8   		imull %eax, %ebx	# —É–º–Ω–æ–∂–µ–Ω–∏–µ eax –Ω–∞ ebx
  20 0012 48       		decl  %eax		# eax - 1
  21 0013 EBF5     		jmp   L1		#–ø–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–∞—á–∞–ª—É –º–æ–¥—É–ª—è l1
  22              		
  23              	L2:	
  24              	        Finish		  	# –∫–æ–Ω–µ—Ü —Ä–∞–±–æ—Ç—ã, 
  24 0015 BB000000 	>  movl $0,%ebx
  24      00
  24 001a B8010000 	>  movl $1,%eax
  24      00
  24 001f CD80     	>  int $0x80
  25              					# –≤–æ–∑–≤—Ä–∞—Ç –≤ –û–°
  26              					# (–º–∞–∫—Ä–æ –∏–∑ —Ñ–∞–π–ª–∞ my-macro)
  27              	        
  28              	.end				# –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
GAS LISTING task2.S 			page 2


DEFINED SYMBOLS
             task2.S:12     .text:0000000000000000 _start
             task2.S:16     .text:000000000000000a L1
             task2.S:23     .text:0000000000000015 L2

NO UNDEFINED SYMBOLS
