# Макрос для подсчёта длинны строки(результат в %edx). Концом строки считается \0 
.macro Strlen str
	xorl %edx, %edx		# Обнуляем %edx.

strlen_begin\@:
	
	movb \str(%edx), %al	# Копируем байт строки в %al.
	cmpb $0, %al		# Символ конца строки?
	je strlen_end\@		# Да, выходим.
	incl %edx		# Нет, увеличиваем %edx на 1 ...
	jmp strlen_begin\@	# и переходим в начало цикла
	
strlen_end\@:	
.endm

# Макрос вывода строки на экран.
.macro Write string

	Strlen \string
	movl $4, %eax		# номер сист. вызова write
	movl $1, %ebx		# параметр 1: дескриптор стандартного вывода	
	movl $\string, %ecx	# параметр 2: адрес памяти с выводимыми символами
	int $0x80		# выполнить системный вызов
.endm
