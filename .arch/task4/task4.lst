GAS LISTING task4.S 			page 1


   1              	/* ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ñ†Ð¸Ñ„Ñ€ Ð¸ Ð²Ñ‹Ð²Ð¾Ð´
   2              		
   3              	.include "my-macro" 		# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¼Ð°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸ÑÐ¼Ð¸
   1              	/* 
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 * 	- ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit
  11              		movl \ret_val, %ebx 	# ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              		int $0x80 		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð
  18              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  19              	 * 	- Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„Ñ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  20              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  21              	 *	- Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  22              	 *	- Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»
  23              	 * 
  24              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  25              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  26              	*/
  27              	.macro Getchar buf_addr
  28              		movl $3, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  29              		movl $0, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  30              		movl \buf_addr, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐº
  31              		     			# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  32              		movl $1, %edx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  33              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  34              	.endm
  35              	
  36              	/*
  37              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² ÑÑ‚Ð°Ð½Ð´
  38              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  39              	 * 	- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  40              	 *
  41              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  42              	 *	Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸" 
  43              	 *
  44              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  45              	 *	- Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº
  46              	 *	  Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸
  47              	 *	
  48              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  49              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  50              	*/
  51              	.macro Puts string
  52              	.data
  53              	    str\@: 	.ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»
  54              		
GAS LISTING task4.S 			page 2


  55              	    strlen\@ = 	. - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  56              	
  57              	.text
  58              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  59              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  60              		movl $str\@, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾
  61              		movl $strlen\@, %edx 	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  62              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  63              	.endm
  64              	
   4              	.include "my-func" 		# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¼Ð¾Ð¸Ð¼Ð¸ Ð¼Ð°ÐºÑ€Ð¾ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸
   1              	# ÐœÐ°ÐºÑ€Ð¾Ñ Ð´Ð»Ñ Ð¿Ð¾Ð´ÑÑ‡Ñ‘Ñ‚Ð° Ð´Ð»Ð¸Ð½Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸(Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð² %edx). ÐšÐ¾Ð
   2              	.macro Strlen str
   3              		xorl %edx, %edx		# ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx.
   4              	
   5              	strlen_begin\@:
   6              		
   7              		movb \str(%edx), %al	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² %al.
   8              		cmpb $0, %al		# Ð¡Ð¸Ð¼Ð²Ð¾Ð» ÐºÐ¾Ð½Ñ†Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸?
   9              		je strlen_end\@		# Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼.
  10              		incl %edx		# ÐÐµÑ‚, ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edx Ð½Ð° 1 ...
  11              		jmp strlen_begin\@	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
  12              		
  13              	strlen_end\@:	
  14              	.endm
  15              	
  16              	# ÐœÐ°ÐºÑ€Ð¾Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð½Ð° ÑÐºÑ€Ð°Ð½.
  17              	.macro Write string
  18              	
  19              		Strlen \string
  20              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  21              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  22              		movl $\string, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²
  23              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  24              	.endm
   5              	.data
   6 0000 30       		delta: .byte 0x30		# ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¸Ð· ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð
   7 0001 FAFF     		summ: .short 65530
   8              	.bss
   9              	        //.lcomm summ, 2          # Ð¡ÑƒÐ¼Ð¼Ð° Ñ‡Ð¸ÑÐµÐ». Ð Ð°Ð·Ð¼ÐµÑ€ - 2 Ð±Ð°Ð¹Ñ‚Ð°
  10              	        .lcomm c, 1               # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°.
  11              	        .lcomm out10, 6           # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  12              		.lcomm out8, 6		  # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð² 8-Ð¾Ð¹  Ð¡Ð¡
  13              		.lcomm out2, 6		  # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð² 2-Ð¾Ð¹ Ð¡Ð¡
  14              	        .lcomm n, 1		  # ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾
  15              	
  16              	.text
  17              	.global _start
  18              	
  19              	_start:
  20              	
  21              	input:
  22              	        Puts "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ"
  22              	> .data
  22 0003 D092D0B2 	>  str0:.ascii "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ\n"
  22      D0B5D0B4 
  22      D0B8D182 
GAS LISTING task4.S 			page 3


  22      D0B520D1 
  22      86D0B8D1 
  22              	>  
  22              	>  strlen0 =. - str0
  22              	> 
  22              	> .text
  22 0000 B8040000 	>  movl $4,%eax
  22      00
  22 0005 BB010000 	>  movl $1,%ebx
  22      00
  22 000a B9030000 	>  movl $str0,%ecx
  22      00
  22 000f BA1A0000 	>  movl $strlen0,%edx
  22      00
  22 0014 CD80     	>  int $0x80
  23              	
  24              	show_prompt:
  25              	        Getchar $c              # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ÑÐ¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ
  25 0016 B8030000 	>  movl $3,%eax
  25      00
  25 001b BB000000 	>  movl $0,%ebx
  25      00
  25 0020 B9000000 	>  movl $c,%ecx
  25      00
  25              	>  
  25 0025 BA010000 	>  movl $1,%edx
  25      00
  25 002a CD80     	>  int $0x80
  26 002c 83F800   	        Cmpl $0, %eax           # ÐšÐ¾Ð½ÐµÑ† Ñ„Ð°Ð¹Ð» - EOF (Ð²Ð²ÐµÐ´ÐµÐ½Ð¾ 0 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²) ?
  27 002f 0F84B000 	        je print_summ_numbers         # Ð”Ð° - Ð²Ñ‹Ð²Ð¾Ð´ ÑÑƒÐ¼Ð¼Ñ‹
  27      0000
  28              	
  29 0035 803D0000 		cmpb $'\n', c           # ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ ?
  29      00000A
  30 003c 0F84A300 	        je print_summ_numbers   # Ð´Ð° - Ð²Ñ‹Ð²Ð¾Ð´ ÑÑƒÐ¼Ð¼Ñ‹
  30      0000
  31              	
  32 0042 803D0000 		cmpb $'-', c
  32      00002D
  33 0049 7435     		je minus_numb
  34              	
  35 004b 803D0000 		cmpb $'9', c            # ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '9' ?
  35      000039
  36 0052 775E     	        ja print_err            # Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  37 0054 803D0000 	        cmpb $'0', c            # ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0' ?
  37      000030
  38 005b 7255     	        jb print_err            # Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  39              	
  40 005d A0000000 	        movb c, %al
  40      00
  41 0062 A21A0000 	        movb %al, n
  41      00
  42              	
  43              	plus_numb:
  44 0067 6631C0   		xorw %ax, %ax		# ÐžÐ±Ð½ÑƒÐ»ÐµÐ½Ð¸Ðµ %ax Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
  45              	
  46 006a A01A0000 	        movb n, %al             # ÐŸÑ€Ð¸ÑÐ²Ð°ÐµÐ²Ð°ÐµÐ¼ %al Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ n
GAS LISTING task4.S 			page 4


  46      00
  47              	
  48 006f 2A050000 		subb delta, %al		# ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð· ÐºÐ¾Ð´Ð°
  48      0000
  49 0075 66010501 		addw %ax, summ		# ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ðº ÑÑƒÐ¼Ð¼Ðµ
  49      000000
  50 007c 724F     		jc err_buf_over		# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
  51              	
  52 007e EB96     		jmp show_prompt
  53              	
  54              	minus_numb:
  55              		Getchar $c
  55 0080 B8030000 	>  movl $3,%eax
  55      00
  55 0085 BB000000 	>  movl $0,%ebx
  55      00
  55 008a B9000000 	>  movl $c,%ecx
  55      00
  55              	>  
  55 008f BA010000 	>  movl $1,%edx
  55      00
  55 0094 CD80     	>  int $0x80
  56 0096 6631C0   		xorw %ax, %ax           # ÐžÐ±Ð½ÑƒÐ»ÐµÐ½Ð¸Ðµ %ax Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
  57              	
  58 0099 A0000000 	        movb c, %al             # ÐŸÑ€Ð¸ÑÐ²Ð°ÐµÐ²Ð°ÐµÐ¼ %al Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ n
  58      00
  59              	
  60 009e 2A050000 	        subb delta, %al         # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð· ÐºÐ¾Ð´Ð°
  60      0000
  61              	
  62 00a4 66290501 	        subw %ax, summ          # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ðº ÑÑƒÐ¼Ð¼Ðµ
  62      000000
  63 00ab 7220     		jc err_buf_over         # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
  64              	
  65 00ad E964FFFF 	        jmp show_prompt
  65      FF
  66              		
  67              	print_err:
  68              		Puts "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´"	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰Ðµ
  68              	> .data
  68 001d D09DD0B5 	>  str3:.ascii "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´\n"
  68      20D186D0 
  68      B8D184D1 
  68      80D0BED0 
  68      B2D0B0D1 
  68              	>  
  68              	>  strlen3 =. - str3
  68              	> 
  68              	> .text
  68 00b2 B8040000 	>  movl $4,%eax
  68      00
  68 00b7 BB010000 	>  movl $1,%ebx
  68      00
  68 00bc B91D0000 	>  movl $str3,%ecx
  68      00
  68 00c1 BA420000 	>  movl $strlen3,%edx
  68      00
GAS LISTING task4.S 			page 5


  68 00c6 CD80     	>  int $0x80
  69 00c8 E949FFFF 		jmp show_prompt 				# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  69      FF
  70              	
  71              	err_buf_over:	
  72              		Puts "ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ. Ð’Ñ‹Ñ…Ð¾Ð´."	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾
  72              	> .data
  72 005f D09FD180 	>  str4:.ascii "ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ. Ð’Ñ‹Ñ…Ð¾Ð´.\n"
  72      D0BED0B8 
  72      D0B7D0BE 
  72      D188D0BB 
  72      D0BE20D0 
  72              	>  
  72              	>  strlen4 =. - str4
  72              	> 
  72              	> .text
  72 00cd B8040000 	>  movl $4,%eax
  72      00
  72 00d2 BB010000 	>  movl $1,%ebx
  72      00
  72 00d7 B95F0000 	>  movl $str4,%ecx
  72      00
  72 00dc BA390000 	>  movl $strlen4,%edx
  72      00
  72 00e1 CD80     	>  int $0x80
  73 00e3 EB18     		jmp stop				# Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  74              	
  75              	print_summ_numbers:
  76              		Puts "Ð¡ÑƒÐ¼Ð¼Ð° Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: "
  76              	> .data
  76 0098 D0A1D183 	>  str5:.ascii "Ð¡ÑƒÐ¼Ð¼Ð° Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: \n"
  76      D0BCD0BC 
  76      D0B020D0 
  76      B2D0B2D0 
  76      B5D0B4D0 
  76              	>  
  76              	>  strlen5 =. - str5
  76              	> 
  76              	> .text
  76 00e5 B8040000 	>  movl $4,%eax
  76      00
  76 00ea BB010000 	>  movl $1,%ebx
  76      00
  76 00ef B9980000 	>  movl $str5,%ecx
  76      00
  76 00f4 BA2B0000 	>  movl $strlen5,%edx
  76      00
  76 00f9 CD80     	>  int $0x80
  77 00fb EB0C     		jmp ToString10
  78              	
  79              	stop:
  80              		Exit $0			# Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  80 00fd B8010000 	>  movl $1,%eax
  80      00
  80 0102 BB000000 	>  movl $0,%ebx
  80      00
  80 0107 CD80     	>  int $0x80
GAS LISTING task4.S 			page 6


  81              	
  82              	ToString10:
  83 0109 66BB0A00 	        movw $10, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð
  84 010d BE040000 	        movl $4, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð½
  84      00
  85 0112 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
  85      0000
  86 0118 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
  87              	
  88              	ToStr10_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
  89 011a BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
  89      00
  90 011f 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
  91 0122 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
  92 0125 88960400 	        movb %dl, out10(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ
  92      0000
  93              	
  94 012b 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
  95 012f 7403     	        je ToStr10_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
  96              	
  97 0131 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
  98 0132 EBE6     	        jmp ToStr10_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
  99              	
 100              	ToStr10_out:
 101 0134 83FE05   	        cmpl  $5, %esi          # Ð’ %esi 5?
 102 0137 7417     	        je stop_to_string10     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 103              	
 104 0139 8A860400 	        movb out10(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 104      0000
 105 013f C6860400 	        movb $0, out10(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 105      000000
 106 0146 88870400 	        movb %al, out10(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%e
 106      0000
 107 014c 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 108 014d 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 109 014e EBE4     	        jmp ToStr10_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 110              	
 111              	stop_to_string10:
 112              		Write out10
 112              	> 
 112              	>  Strlen out10
 112 0150 31D2     	>>  xorl %edx,%edx
 112              	>> 
 112              	>> strlen_begin8:
 112              	>>  
 112 0152 8A820400 	>>  movb out10(%edx),%al
 112      0000
 112 0158 3C00     	>>  cmpb $0,%al
 112 015a 7403     	>>  je strlen_end8
 112 015c 42       	>>  incl %edx
 112 015d EBF3     	>>  jmp strlen_begin8
 112              	>>  
 112              	>> strlen_end8:
 112 015f B8040000 	>  movl $4,%eax
 112      00
 112 0164 BB010000 	>  movl $1,%ebx
 112      00
GAS LISTING task4.S 			page 7


 112 0169 B9040000 	>  movl $out10,%ecx
 112      00
 112 016e CD80     	>  int $0x80
 113              		Puts ""
 113              	> .data
 113 00c3 0A       	>  str9:.ascii "\n"
 113              	>  
 113              	>  strlen9 =. - str9
 113              	> 
 113              	> .text
 113 0170 B8040000 	>  movl $4,%eax
 113      00
 113 0175 BB010000 	>  movl $1,%ebx
 113      00
 113 017a B9C30000 	>  movl $str9,%ecx
 113      00
 113 017f BA010000 	>  movl $strlen9,%edx
 113      00
 113 0184 CD80     	>  int $0x80
 114 0186 66C70504 		movw $'',out10
 114      00000027 
 114      00
 115              	
 116              	ToString8:
 117              		Puts "Ð’ Ð²Ð¾ÑÑŒÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ cc:"
 117              	> .data
 117 00c4 D09220D0 	>  str10:.ascii "Ð’ Ð²Ð¾ÑÑŒÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ cc:\n"
 117      B2D0BED1 
 117      81D18CD0 
 117      BCD0B5D1 
 117      80D0B8D1 
 117              	>  
 117              	>  strlen10 =. - str10
 117              	> 
 117              	> .text
 117 018f B8040000 	>  movl $4,%eax
 117      00
 117 0194 BB010000 	>  movl $1,%ebx
 117      00
 117 0199 B9C40000 	>  movl $str10,%ecx
 117      00
 117 019e BA200000 	>  movl $strlen10,%edx
 117      00
 117 01a3 CD80     	>  int $0x80
 118 01a5 66BB0800 	        movw $8, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð¸
 119 01a9 BE050000 	        movl $5, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð½
 119      00
 120 01ae 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
 120      0000
 121 01b4 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
 122              	
 123              	ToStr8_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 124 01b6 BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
 124      00
 125 01bb 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
 126 01be 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
 127 01c1 88960C00 	        movb %dl, out8(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ¶
GAS LISTING task4.S 			page 8


 127      0000
 128              	
 129 01c7 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
 130 01cb 7403     	        je ToStr8_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
 131              	
 132 01cd 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
 133 01ce EBE6     	        jmp ToStr8_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 134              	
 135              	ToStr8_out:
 136 01d0 83FE06   	        cmpl  $6, %esi          # Ð’ %esi 6?
 137 01d3 7417     	        je stop_to_string8     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 138              	
 139 01d5 8A860C00 	        movb out8(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 139      0000
 140 01db C6860C00 	        movb $0, out8(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 140      000000
 141 01e2 88870C00 	        movb %al, out8(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%ed
 141      0000
 142 01e8 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 143 01e9 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 144 01ea EBE4     	        jmp ToStr8_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 145              	
 146              	stop_to_string8:
 147              		Write out8
 147              	> 
 147              	>  Strlen out8
 147 01ec 31D2     	>>  xorl %edx,%edx
 147              	>> 
 147              	>> strlen_begin12:
 147              	>>  
 147 01ee 8A820C00 	>>  movb out8(%edx),%al
 147      0000
 147 01f4 3C00     	>>  cmpb $0,%al
 147 01f6 7403     	>>  je strlen_end12
 147 01f8 42       	>>  incl %edx
 147 01f9 EBF3     	>>  jmp strlen_begin12
 147              	>>  
 147              	>> strlen_end12:
 147 01fb B8040000 	>  movl $4,%eax
 147      00
 147 0200 BB010000 	>  movl $1,%ebx
 147      00
 147 0205 B90C0000 	>  movl $out8,%ecx
 147      00
 147 020a CD80     	>  int $0x80
 148              		Puts ""
 148              	> .data
 148 00e4 0A       	>  str13:.ascii "\n"
 148              	>  
 148              	>  strlen13 =. - str13
 148              	> 
 148              	> .text
 148 020c B8040000 	>  movl $4,%eax
 148      00
 148 0211 BB010000 	>  movl $1,%ebx
 148      00
 148 0216 B9E40000 	>  movl $str13,%ecx
GAS LISTING task4.S 			page 9


 148      00
 148 021b BA010000 	>  movl $strlen13,%edx
 148      00
 148 0220 CD80     	>  int $0x80
 149 0222 66C7050C 		movw $'',out8
 149      00000027 
 149      00
 150              	ToString2:
 151              		Puts "Ð’ Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ cc:"
 151              	> .data
 151 00e5 D09220D0 	>  str14:.ascii "Ð’ Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ cc:\n"
 151      B4D0B2D0 
 151      BED0B8D1 
 151      87D0BDD0 
 151      BED0B920 
 151              	>  
 151              	>  strlen14 =. - str14
 151              	> 
 151              	> .text
 151 022b B8040000 	>  movl $4,%eax
 151      00
 151 0230 BB010000 	>  movl $1,%ebx
 151      00
 151 0235 B9E50000 	>  movl $str14,%ecx
 151      00
 151 023a BA180000 	>  movl $strlen14,%edx
 151      00
 151 023f CD80     	>  int $0x80
 152 0241 66BB0200 	        movw $2, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð¸
 153 0245 BE0F0000 	        movl $15, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð
 153      00
 154 024a 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
 154      0000
 155 0250 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
 156              	
 157              	ToStr2_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 158 0252 BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
 158      00
 159 0257 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
 160 025a 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
 161 025d 88961400 	        movb %dl, out2(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ¶
 161      0000
 162              	
 163 0263 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
 164 0267 7403     	        je ToStr2_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
 165              	
 166 0269 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
 167 026a EBE6     	        jmp ToStr2_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 168              	
 169              	ToStr2_out:
 170 026c 83FE10   	        cmpl  $16, %esi          # Ð’ %esi 16?
 171 026f 7417     	        je stop_to_string2     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 172              	
 173 0271 8A861400 	        movb out2(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 173      0000
 174 0277 C6861400 	        movb $0, out2(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 174      000000
GAS LISTING task4.S 			page 10


 175 027e 88871400 	        movb %al, out2(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%ed
 175      0000
 176 0284 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 177 0285 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 178 0286 EBE4     	        jmp ToStr2_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 179              	
 180              	stop_to_string2:
 181 0288 C6871400 		movb $0,out2(%edi)
 181      000000
 182              		Write out2
 182              	> 
 182              	>  Strlen out2
 182 028f 31D2     	>>  xorl %edx,%edx
 182              	>> 
 182              	>> strlen_begin16:
 182              	>>  
 182 0291 8A821400 	>>  movb out2(%edx),%al
 182      0000
 182 0297 3C00     	>>  cmpb $0,%al
 182 0299 7403     	>>  je strlen_end16
 182 029b 42       	>>  incl %edx
 182 029c EBF3     	>>  jmp strlen_begin16
 182              	>>  
 182              	>> strlen_end16:
 182 029e B8040000 	>  movl $4,%eax
 182      00
 182 02a3 BB010000 	>  movl $1,%ebx
 182      00
 182 02a8 B9140000 	>  movl $out2,%ecx
 182      00
 182 02ad CD80     	>  int $0x80
 183              		Puts ""
 183              	> .data
 183 00fd 0A       	>  str17:.ascii "\n"
 183              	>  
 183              	>  strlen17 =. - str17
 183              	> 
 183              	> .text
 183 02af B8040000 	>  movl $4,%eax
 183      00
 183 02b4 BB010000 	>  movl $1,%ebx
 183      00
 183 02b9 B9FD0000 	>  movl $str17,%ecx
 183      00
 183 02be BA010000 	>  movl $strlen17,%edx
 183      00
 183 02c3 CD80     	>  int $0x80
 184 02c5 66C70514 		movw $'',out2
 184      00000027 
 184      00
 185 02ce E92DFDFF 		jmp input
 185      FF
 186              	.end
GAS LISTING task4.S 			page 11


DEFINED SYMBOLS
             task4.S:6      .data:0000000000000000 delta
             task4.S:7      .data:0000000000000001 summ
                             .bss:0000000000000000 c
             task4.S:11     .bss:0000000000000004 out10
             task4.S:12     .bss:000000000000000c out8
             task4.S:13     .bss:0000000000000014 out2
             task4.S:13     .bss:000000000000001a n
             task4.S:19     .text:0000000000000000 _start
             task4.S:21     .text:0000000000000000 input
             task4.S:22     .data:0000000000000003 str0
             task4.S:22     *ABS*:000000000000001a strlen0
             task4.S:24     .text:0000000000000016 show_prompt
             task4.S:75     .text:00000000000000e5 print_summ_numbers
             task4.S:54     .text:0000000000000080 minus_numb
             task4.S:67     .text:00000000000000b2 print_err
             task4.S:43     .text:0000000000000067 plus_numb
             task4.S:71     .text:00000000000000cd err_buf_over
             task4.S:68     .data:000000000000001d str3
             task4.S:68     *ABS*:0000000000000042 strlen3
             task4.S:72     .data:000000000000005f str4
             task4.S:72     *ABS*:0000000000000039 strlen4
             task4.S:79     .text:00000000000000fd stop
             task4.S:76     .data:0000000000000098 str5
             task4.S:76     *ABS*:000000000000002b strlen5
             task4.S:82     .text:0000000000000109 ToString10
             task4.S:88     .text:000000000000011a ToStr10_begin
             task4.S:100    .text:0000000000000134 ToStr10_out
             task4.S:111    .text:0000000000000150 stop_to_string10
             task4.S:112    .text:0000000000000152 strlen_begin8
             task4.S:112    .text:000000000000015f strlen_end8
             task4.S:113    .data:00000000000000c3 str9
             task4.S:113    *ABS*:0000000000000001 strlen9
             task4.S:116    .text:000000000000018f ToString8
             task4.S:117    .data:00000000000000c4 str10
             task4.S:117    *ABS*:0000000000000020 strlen10
             task4.S:123    .text:00000000000001b6 ToStr8_begin
             task4.S:135    .text:00000000000001d0 ToStr8_out
             task4.S:146    .text:00000000000001ec stop_to_string8
             task4.S:147    .text:00000000000001ee strlen_begin12
             task4.S:147    .text:00000000000001fb strlen_end12
             task4.S:148    .data:00000000000000e4 str13
             task4.S:148    *ABS*:0000000000000001 strlen13
             task4.S:150    .text:000000000000022b ToString2
             task4.S:151    .data:00000000000000e5 str14
             task4.S:151    *ABS*:0000000000000018 strlen14
             task4.S:157    .text:0000000000000252 ToStr2_begin
             task4.S:169    .text:000000000000026c ToStr2_out
             task4.S:180    .text:0000000000000288 stop_to_string2
             task4.S:182    .text:0000000000000291 strlen_begin16
             task4.S:182    .text:000000000000029e strlen_end16
             task4.S:183    .data:00000000000000fd str17
             task4.S:183    *ABS*:0000000000000001 strlen17

NO UNDEFINED SYMBOLS
