GAS LISTING task4.S 			page 1


   1              	/* ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ñ†Ð¸Ñ„Ñ€ Ð¸ Ð²Ñ‹Ð²Ð¾Ð´
   2              		
   3              	.include "my-macro" 		# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¼Ð°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸ÑÐ¼Ð¸
   1              	/* 
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 * 	- ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit
  11              		movl \ret_val, %ebx 	# ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              		int $0x80 		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð
  18              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  19              	 * 	- Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„Ñ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  20              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  21              	 *	- Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  22              	 *	- Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»
  23              	 * 
  24              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  25              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  26              	*/
  27              	.macro Getchar buf_addr
  28              		movl $3, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  29              		movl $0, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  30              		movl \buf_addr, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐº
  31              		     			# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  32              		movl $1, %edx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  33              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  34              	.endm
  35              	
  36              	/*
  37              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² ÑÑ‚Ð°Ð½Ð´
  38              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  39              	 * 	- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  40              	 *
  41              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  42              	 *	Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸" 
  43              	 *
  44              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  45              	 *	- Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº
  46              	 *	  Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸
  47              	 *	
  48              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  49              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  50              	*/
  51              	.macro Puts string
  52              	.data
  53              	    str\@: 	.ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»
  54              		
GAS LISTING task4.S 			page 2


  55              	    strlen\@ = 	. - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  56              	
  57              	.text
  58              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  59              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  60              		movl $str\@, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾
  61              		movl $strlen\@, %edx 	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  62              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  63              	.endm
  64              	
   4              	.include "my-func" 		# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¼Ð¾Ð¸Ð¼Ð¸ Ð¼Ð°ÐºÑ€Ð¾ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸
   1              	# ÐœÐ°ÐºÑ€Ð¾Ñ Ð´Ð»Ñ Ð¿Ð¾Ð´ÑÑ‡Ñ‘Ñ‚Ð° Ð´Ð»Ð¸Ð½Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸(Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð² %edx). ÐšÐ¾Ð
   2              	.macro Strlen str
   3              		xorl %edx, %edx		# ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx.
   4              	
   5              	strlen_begin\@:
   6              		
   7              		movb \str(%edx), %al	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² %al.
   8              		cmpb $0, %al		# Ð¡Ð¸Ð¼Ð²Ð¾Ð» ÐºÐ¾Ð½Ñ†Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸?
   9              		je strlen_end\@		# Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼.
  10              		incl %edx		# ÐÐµÑ‚, ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edx Ð½Ð° 1 ...
  11              		jmp strlen_begin\@	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
  12              		
  13              	strlen_end\@:	
  14              	.endm
  15              	
  16              	# ÐœÐ°ÐºÑ€Ð¾Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð½Ð° ÑÐºÑ€Ð°Ð½.
  17              	.macro Write string
  18              	
  19              		Strlen \string
  20              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  21              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  22              		movl $\string, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²
  23              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  24              	.endm
   5              	.data
   6 0000 30       		delta: .byte 0x30		# ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¸Ð· ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð
   7 0001 E8FD     		summ: .short 65000
   8              	.bss
   9              	        //.lcomm summ, 2          # Ð¡ÑƒÐ¼Ð¼Ð° Ñ‡Ð¸ÑÐµÐ». Ð Ð°Ð·Ð¼ÐµÑ€ - 2 Ð±Ð°Ð¹Ñ‚Ð°
  10              	        .lcomm c, 1             # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°. Ð
  11              	        .lcomm out10, 6           # Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°. Ð Ð°Ð·Ð¼ÐµÑ€ - 6 Ð±Ð°Ð¹Ñ‚
  12              		.lcomm out8, 6
  13              		.lcomm out2, 6
  14              	        .lcomm n, 1		# ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»
  15              	
  16              	.text
  17              	.global _start
  18              	
  19              	_start:
  20              	
  21              	input:
  22              	        Puts "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ"
  22              	> .data
  22 0003 D092D0B2 	>  str0:.ascii "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ\n"
  22      D0B5D0B4 
  22      D0B8D182 
GAS LISTING task4.S 			page 3


  22      D0B520D1 
  22      86D0B8D1 
  22              	>  
  22              	>  strlen0 =. - str0
  22              	> 
  22              	> .text
  22 0000 B8040000 	>  movl $4,%eax
  22      00
  22 0005 BB010000 	>  movl $1,%ebx
  22      00
  22 000a B9030000 	>  movl $str0,%ecx
  22      00
  22 000f BA1A0000 	>  movl $strlen0,%edx
  22      00
  22 0014 CD80     	>  int $0x80
  23              	
  24              	show_prompt:
  25              	        Getchar $c              # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ÑÐ¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ
  25 0016 B8030000 	>  movl $3,%eax
  25      00
  25 001b BB000000 	>  movl $0,%ebx
  25      00
  25 0020 B9000000 	>  movl $c,%ecx
  25      00
  25              	>  
  25 0025 BA010000 	>  movl $1,%edx
  25      00
  25 002a CD80     	>  int $0x80
  26 002c 83F800   	        cmpl $0, %eax           # ÐšÐ¾Ð½ÐµÑ† Ñ„Ð°Ð¹Ð» - EOF (Ð²Ð²ÐµÐ´ÐµÐ½Ð¾ 0 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²) ?
  27 002f 0F84BA00 	        je print_summ_numbers         # Ð”Ð° - Ð²Ñ‹Ð²Ð¾Ð´ ÑÑƒÐ¼Ð¼Ñ‹
  27      0000
  28              	
  29 0035 803D0000 		cmpb $'\n', c           # ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ ?
  29      00000A
  30 003c 0F84AD00 	        je print_summ_numbers               # Ð´Ð° - Ð²Ñ‹Ð²Ð¾Ð´ ÑÑƒÐ¼Ð¼Ñ‹
  30      0000
  31              	
  32 0042 803D0000 		cmpb $'-', c
  32      00002D
  33 0049 743A     		je minus_numb
  34              	
  35 004b 803D0000 		cmpb $'9', c            # ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '9' ?
  35      000039
  36 0052 7768     	        ja print_err        # Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  37 0054 803D0000 	        cmpb $'0', c            # ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0' ?
  37      000030
  38 005b 725F     	        jb print_err        # Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  39              	
  40 005d A0000000 	        movb c, %al
  40      00
  41 0062 A21A0000 	        movb %al, n
  41      00
  42              	
  43              	//        jmp plus_numb               # nÐµÑ€ÐµÑ…Ð¾Ð´ Ðº Ð¿Ñ€Ð¸Ð±Ð°Ð²Ð»ÐµÐ½Ð¸ÑŽ Ñ‡Ð¸ÑÐ»Ð° Ðº ÑÑƒÐ
  44              	
  45              	plus_numb:
  46 0067 6631C0   		xorw %ax, %ax		# ÐžÐ±Ð½ÑƒÐ»ÐµÐ½Ð¸Ðµ %ax Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
GAS LISTING task4.S 			page 4


  47              	
  48 006a A01A0000 	        movb n, %al             # ÐŸÑ€Ð¸ÑÐ²Ð°ÐµÐ²Ð°ÐµÐ¼ %al Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ n
  48      00
  49              	
  50 006f 2A050000 		subb delta, %al		# ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð· ÐºÐ¾Ð´Ð°
  50      0000
  51 0075 66010501 		addw %ax, summ		# ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ðº ÑÑƒÐ¼Ð¼Ðµ
  51      000000
  52 007c 7259     		jc err_buf_over		# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
  53 007e E8900000 		call ToString10
  53      00
  54 0083 EB91     		jmp show_prompt
  55              	
  56              	minus_numb:
  57              		Getchar $c
  57 0085 B8030000 	>  movl $3,%eax
  57      00
  57 008a BB000000 	>  movl $0,%ebx
  57      00
  57 008f B9000000 	>  movl $c,%ecx
  57      00
  57              	>  
  57 0094 BA010000 	>  movl $1,%edx
  57      00
  57 0099 CD80     	>  int $0x80
  58 009b 6631C0   		xorw %ax, %ax           # ÐžÐ±Ð½ÑƒÐ»ÐµÐ½Ð¸Ðµ %ax Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
  59              	
  60 009e A0000000 	        movb c, %al             # ÐŸÑ€Ð¸ÑÐ²Ð°ÐµÐ²Ð°ÐµÐ¼ %al Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ n
  60      00
  61              	
  62 00a3 2A050000 	        subb delta, %al         # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð· ÐºÐ¾Ð´Ð°
  62      0000
  63 00a9 66290501 	        subw %ax, summ          # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ðº ÑÑƒÐ¼Ð¼Ðµ
  63      000000
  64 00b0 E85E0000 		call ToString10
  64      00
  65 00b5 7220     		jc err_buf_over         # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
  66              	
  67 00b7 E95AFFFF 	        jmp show_prompt
  67      FF
  68              		
  69              	print_err:
  70              		Puts "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´"	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰Ðµ
  70              	> .data
  70 001d D09DD0B5 	>  str3:.ascii "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´\n"
  70      20D186D0 
  70      B8D184D1 
  70      80D0BED0 
  70      B2D0B0D1 
  70              	>  
  70              	>  strlen3 =. - str3
  70              	> 
  70              	> .text
  70 00bc B8040000 	>  movl $4,%eax
  70      00
  70 00c1 BB010000 	>  movl $1,%ebx
  70      00
GAS LISTING task4.S 			page 5


  70 00c6 B91D0000 	>  movl $str3,%ecx
  70      00
  70 00cb BA420000 	>  movl $strlen3,%edx
  70      00
  70 00d0 CD80     	>  int $0x80
  71 00d2 E93FFFFF 		jmp show_prompt 	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  71      FF
  72              	
  73              	err_buf_over:	
  74              		Puts "ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ. Ð’Ñ‹Ñ…Ð¾Ð´."	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾
  74              	> .data
  74 005f D09FD180 	>  str4:.ascii "ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ. Ð’Ñ‹Ñ…Ð¾Ð´.\n"
  74      D0BED0B8 
  74      D0B7D0BE 
  74      D188D0BB 
  74      D0BE20D0 
  74              	>  
  74              	>  strlen4 =. - str4
  74              	> 
  74              	> .text
  74 00d7 B8040000 	>  movl $4,%eax
  74      00
  74 00dc BB010000 	>  movl $1,%ebx
  74      00
  74 00e1 B95F0000 	>  movl $str4,%ecx
  74      00
  74 00e6 BA390000 	>  movl $strlen4,%edx
  74      00
  74 00eb CD80     	>  int $0x80
  75 00ed EB18     		jmp stop				# Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  76              	
  77              	print_summ_numbers:
  78              		Puts "Ð¡ÑƒÐ¼Ð¼Ð° Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: "
  78              	> .data
  78 0098 D0A1D183 	>  str5:.ascii "Ð¡ÑƒÐ¼Ð¼Ð° Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: \n"
  78      D0BCD0BC 
  78      D0B020D0 
  78      B2D0B2D0 
  78      B5D0B4D0 
  78              	>  
  78              	>  strlen5 =. - str5
  78              	> 
  78              	> .text
  78 00ef B8040000 	>  movl $4,%eax
  78      00
  78 00f4 BB010000 	>  movl $1,%ebx
  78      00
  78 00f9 B9980000 	>  movl $str5,%ecx
  78      00
  78 00fe BA2B0000 	>  movl $strlen5,%edx
  78      00
  78 0103 CD80     	>  int $0x80
  79 0105 EB0C     		jmp ToString10
  80              	
  81              	stop:
  82              		Exit $0			# Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  82 0107 B8010000 	>  movl $1,%eax
GAS LISTING task4.S 			page 6


  82      00
  82 010c BB000000 	>  movl $0,%ebx
  82      00
  82 0111 CD80     	>  int $0x80
  83              	
  84              	ToString10:
  85 0113 66BB0A00 	        movw $10, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð
  86 0117 BE040000 	        movl $4, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð½
  86      00
  87 011c 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
  87      0000
  88 0122 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
  89              	
  90              	ToStr10_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
  91 0124 BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
  91      00
  92 0129 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
  93 012c 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
  94 012f 88960400 	        movb %dl, out10(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ
  94      0000
  95              	
  96 0135 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
  97 0139 7403     	        je ToStr10_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
  98              	
  99 013b 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
 100 013c EBE6     	        jmp ToStr10_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 101              	
 102              	ToStr10_out:
 103 013e 83FE05   	        cmpl  $5, %esi          # Ð’ %esi 5?
 104 0141 7417     	        je stop_to_string10     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 105              	
 106 0143 8A860400 	        movb out10(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 106      0000
 107 0149 C6860400 	        movb $0, out10(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 107      000000
 108 0150 88870400 	        movb %al, out10(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%e
 108      0000
 109 0156 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 110 0157 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 111 0158 EBE4     	        jmp ToStr10_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 112              	
 113              	stop_to_string10:
 114              		Write out10
 114              	> 
 114              	>  Strlen out10
 114 015a 31D2     	>>  xorl %edx,%edx
 114              	>> 
 114              	>> strlen_begin8:
 114              	>>  
 114 015c 8A820400 	>>  movb out10(%edx),%al
 114      0000
 114 0162 3C00     	>>  cmpb $0,%al
 114 0164 7403     	>>  je strlen_end8
 114 0166 42       	>>  incl %edx
 114 0167 EBF3     	>>  jmp strlen_begin8
 114              	>>  
 114              	>> strlen_end8:
GAS LISTING task4.S 			page 7


 114 0169 B8040000 	>  movl $4,%eax
 114      00
 114 016e BB010000 	>  movl $1,%ebx
 114      00
 114 0173 B9040000 	>  movl $out10,%ecx
 114      00
 114 0178 CD80     	>  int $0x80
 115              		Puts ""
 115              	> .data
 115 00c3 0A       	>  str9:.ascii "\n"
 115              	>  
 115              	>  strlen9 =. - str9
 115              	> 
 115              	> .text
 115 017a B8040000 	>  movl $4,%eax
 115      00
 115 017f BB010000 	>  movl $1,%ebx
 115      00
 115 0184 B9C30000 	>  movl $str9,%ecx
 115      00
 115 0189 BA010000 	>  movl $strlen9,%edx
 115      00
 115 018e CD80     	>  int $0x80
 116 0190 66C70504 		movw $'',out10
 116      00000027 
 116      00
 117              	
 118              	ToString8:
 119              		Puts "Ð’ Ð²Ð¾ÑÑŒÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ cc:"
 119              	> .data
 119 00c4 D09220D0 	>  str10:.ascii "Ð’ Ð²Ð¾ÑÑŒÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ cc:\n"
 119      B2D0BED1 
 119      81D18CD0 
 119      BCD0B5D1 
 119      80D0B8D1 
 119              	>  
 119              	>  strlen10 =. - str10
 119              	> 
 119              	> .text
 119 0199 B8040000 	>  movl $4,%eax
 119      00
 119 019e BB010000 	>  movl $1,%ebx
 119      00
 119 01a3 B9C40000 	>  movl $str10,%ecx
 119      00
 119 01a8 BA200000 	>  movl $strlen10,%edx
 119      00
 119 01ad CD80     	>  int $0x80
 120 01af 66BB0800 	        movw $8, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð¸
 121 01b3 BE050000 	        movl $5, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð½
 121      00
 122 01b8 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
 122      0000
 123 01be 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
 124              	
 125              	ToStr8_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 126 01c0 BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
GAS LISTING task4.S 			page 8


 126      00
 127 01c5 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
 128 01c8 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
 129 01cb 88960C00 	        movb %dl, out8(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ¶
 129      0000
 130              	
 131 01d1 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
 132 01d5 7403     	        je ToStr8_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
 133              	
 134 01d7 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
 135 01d8 EBE6     	        jmp ToStr8_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 136              	
 137              	ToStr8_out:
 138 01da 83FE06   	        cmpl  $6, %esi          # Ð’ %esi 6?
 139 01dd 7417     	        je stop_to_string8     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 140              	
 141 01df 8A860C00 	        movb out8(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 141      0000
 142 01e5 C6860C00 	        movb $0, out8(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 142      000000
 143 01ec 88870C00 	        movb %al, out8(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%ed
 143      0000
 144 01f2 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 145 01f3 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 146 01f4 EBE4     	        jmp ToStr8_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 147              	
 148              	stop_to_string8:
 149              		Write out8
 149              	> 
 149              	>  Strlen out8
 149 01f6 31D2     	>>  xorl %edx,%edx
 149              	>> 
 149              	>> strlen_begin12:
 149              	>>  
 149 01f8 8A820C00 	>>  movb out8(%edx),%al
 149      0000
 149 01fe 3C00     	>>  cmpb $0,%al
 149 0200 7403     	>>  je strlen_end12
 149 0202 42       	>>  incl %edx
 149 0203 EBF3     	>>  jmp strlen_begin12
 149              	>>  
 149              	>> strlen_end12:
 149 0205 B8040000 	>  movl $4,%eax
 149      00
 149 020a BB010000 	>  movl $1,%ebx
 149      00
 149 020f B90C0000 	>  movl $out8,%ecx
 149      00
 149 0214 CD80     	>  int $0x80
 150              		Puts ""
 150              	> .data
 150 00e4 0A       	>  str13:.ascii "\n"
 150              	>  
 150              	>  strlen13 =. - str13
 150              	> 
 150              	> .text
 150 0216 B8040000 	>  movl $4,%eax
GAS LISTING task4.S 			page 9


 150      00
 150 021b BB010000 	>  movl $1,%ebx
 150      00
 150 0220 B9E40000 	>  movl $str13,%ecx
 150      00
 150 0225 BA010000 	>  movl $strlen13,%edx
 150      00
 150 022a CD80     	>  int $0x80
 151 022c 66C7050C 		movw $'',out8
 151      00000027 
 151      00
 152              	ToString2:
 153              		Puts "Ð’ Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ cc:"
 153              	> .data
 153 00e5 D09220D0 	>  str14:.ascii "Ð’ Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ cc:\n"
 153      B4D0B2D0 
 153      BED0B8D1 
 153      87D0BDD0 
 153      BED0B920 
 153              	>  
 153              	>  strlen14 =. - str14
 153              	> 
 153              	> .text
 153 0235 B8040000 	>  movl $4,%eax
 153      00
 153 023a BB010000 	>  movl $1,%ebx
 153      00
 153 023f B9E50000 	>  movl $str14,%ecx
 153      00
 153 0244 BA180000 	>  movl $strlen14,%edx
 153      00
 153 0249 CD80     	>  int $0x80
 154 024b 66BB0200 	        movw $2, %bx           # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ. ÐÐ° Ð½ÐµÑ‘ Ð±ÑƒÐ´ÐµÐ¼ Ð´ÐµÐ»Ð¸
 155 024f BE0F0000 	        movl $15, %esi           # ÐÐ´Ñ€ÐµÑ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸Ð»Ð°. Ð’ Ñ‡Ð¸ÑÐ»Ðµ Ð
 155      00
 156 0254 66A10100 	        movw summ, %ax 		# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð¼ÐµÑ€ Ð² %ax
 156      0000
 157 025a 31FF     	        xorl %edi, %edi         # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edi
 158              	
 159              	ToStr2_begin:                  # ÐÐ°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 160 025c BA000000 	        movl $0, %edx           # ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ %edx (Ð’ Ð½Ñ‘Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð±Ñƒ
 160      00
 161 0261 66F7F3   	        divw %bx                # Ð”ÐµÐ»Ð¸Ð¼ %ax Ð½Ð° %bx, Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² %dx
 162 0264 80C230   	        addb $0x30, %dl         # ÐŸÑ€Ð¸Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº %dl 0x30, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ðº
 163 0267 88961400 	        movb %dl, out2(%esi) 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ %dl Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾ Ð½ÑƒÐ¶
 163      0000
 164              	
 165 026d 6683F800 	        cmpw $0, %ax            # Ð”Ð¾ÑˆÐ»Ð¸ Ð´Ð¾ Ð½ÑƒÐ»Ñ? (Ð’ %ax Ð¿ÑƒÑÑ‚Ð¾?)
 166 0271 7403     	        je ToStr2_out     	# Ð”Ð°, Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ
 167              	
 168 0273 4E       	        decl %esi               # ÐÐµÑ‚, ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ %esi Ð½Ð° 1
 169 0274 EBE6     	        jmp ToStr2_begin     	# Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 170              	
 171              	ToStr2_out:
 172 0276 83FE10   	        cmpl  $16, %esi          # Ð’ %esi 16?
 173 0279 7417     	        je stop_to_string2     # Ð”Ð°, Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
 174              	
GAS LISTING task4.S 			page 10


 175 027b 8A861400 	        movb out2(%esi), %al 	# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð¹Ñ‚ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ  out(%esi) Ð² %al
 175      0000
 176 0281 C6861400 	        movb $0, out2(%esi)  	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ 0 Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%esi)
 176      000000
 177 0288 88871400 	        movb %al, out2(%edi) 	# Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ %al Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ out(%ed
 177      0000
 178 028e 46       	        inc %esi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %esi Ð½Ð° 1
 179 028f 47       	        inc %edi                # Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ %edi Ð½Ð° 1
 180 0290 EBE4     	        jmp ToStr2_out    	# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ†Ð¸ÐºÐ»Ð°
 181              	
 182              	stop_to_string2:
 183 0292 C6871400 		movb $0,out2(%edi)
 183      000000
 184              		Write out2
 184              	> 
 184              	>  Strlen out2
 184 0299 31D2     	>>  xorl %edx,%edx
 184              	>> 
 184              	>> strlen_begin16:
 184              	>>  
 184 029b 8A821400 	>>  movb out2(%edx),%al
 184      0000
 184 02a1 3C00     	>>  cmpb $0,%al
 184 02a3 7403     	>>  je strlen_end16
 184 02a5 42       	>>  incl %edx
 184 02a6 EBF3     	>>  jmp strlen_begin16
 184              	>>  
 184              	>> strlen_end16:
 184 02a8 B8040000 	>  movl $4,%eax
 184      00
 184 02ad BB010000 	>  movl $1,%ebx
 184      00
 184 02b2 B9140000 	>  movl $out2,%ecx
 184      00
 184 02b7 CD80     	>  int $0x80
 185              		Puts ""
 185              	> .data
 185 00fd 0A       	>  str17:.ascii "\n"
 185              	>  
 185              	>  strlen17 =. - str17
 185              	> 
 185              	> .text
 185 02b9 B8040000 	>  movl $4,%eax
 185      00
 185 02be BB010000 	>  movl $1,%ebx
 185      00
 185 02c3 B9FD0000 	>  movl $str17,%ecx
 185      00
 185 02c8 BA010000 	>  movl $strlen17,%edx
 185      00
 185 02cd CD80     	>  int $0x80
 186 02cf 66C70514 		movw $'',out2
 186      00000027 
 186      00
 187 02d8 E923FDFF 		jmp input
 187      FF
 188              	.end
GAS LISTING task4.S 			page 11


GAS LISTING task4.S 			page 12


DEFINED SYMBOLS
             task4.S:6      .data:0000000000000000 delta
             task4.S:7      .data:0000000000000001 summ
                             .bss:0000000000000000 c
             task4.S:11     .bss:0000000000000004 out10
             task4.S:12     .bss:000000000000000c out8
             task4.S:13     .bss:0000000000000014 out2
             task4.S:13     .bss:000000000000001a n
             task4.S:19     .text:0000000000000000 _start
             task4.S:21     .text:0000000000000000 input
             task4.S:22     .data:0000000000000003 str0
             task4.S:22     *ABS*:000000000000001a strlen0
             task4.S:24     .text:0000000000000016 show_prompt
             task4.S:77     .text:00000000000000ef print_summ_numbers
             task4.S:56     .text:0000000000000085 minus_numb
             task4.S:69     .text:00000000000000bc print_err
             task4.S:45     .text:0000000000000067 plus_numb
             task4.S:73     .text:00000000000000d7 err_buf_over
             task4.S:84     .text:0000000000000113 ToString10
             task4.S:70     .data:000000000000001d str3
             task4.S:70     *ABS*:0000000000000042 strlen3
             task4.S:74     .data:000000000000005f str4
             task4.S:74     *ABS*:0000000000000039 strlen4
             task4.S:81     .text:0000000000000107 stop
             task4.S:78     .data:0000000000000098 str5
             task4.S:78     *ABS*:000000000000002b strlen5
             task4.S:90     .text:0000000000000124 ToStr10_begin
             task4.S:102    .text:000000000000013e ToStr10_out
             task4.S:113    .text:000000000000015a stop_to_string10
             task4.S:114    .text:000000000000015c strlen_begin8
             task4.S:114    .text:0000000000000169 strlen_end8
             task4.S:115    .data:00000000000000c3 str9
             task4.S:115    *ABS*:0000000000000001 strlen9
             task4.S:118    .text:0000000000000199 ToString8
             task4.S:119    .data:00000000000000c4 str10
             task4.S:119    *ABS*:0000000000000020 strlen10
             task4.S:125    .text:00000000000001c0 ToStr8_begin
             task4.S:137    .text:00000000000001da ToStr8_out
             task4.S:148    .text:00000000000001f6 stop_to_string8
             task4.S:149    .text:00000000000001f8 strlen_begin12
             task4.S:149    .text:0000000000000205 strlen_end12
             task4.S:150    .data:00000000000000e4 str13
             task4.S:150    *ABS*:0000000000000001 strlen13
             task4.S:152    .text:0000000000000235 ToString2
             task4.S:153    .data:00000000000000e5 str14
             task4.S:153    *ABS*:0000000000000018 strlen14
             task4.S:159    .text:000000000000025c ToStr2_begin
             task4.S:171    .text:0000000000000276 ToStr2_out
             task4.S:182    .text:0000000000000292 stop_to_string2
             task4.S:184    .text:000000000000029b strlen_begin16
             task4.S:184    .text:00000000000002a8 strlen_end16
             task4.S:185    .data:00000000000000fd str17
             task4.S:185    *ABS*:0000000000000001 strlen17

NO UNDEFINED SYMBOLS
